syntax = "proto3";
package rpc;

message AdapterHttpRequest {
    string method = 1;
    string action = 2;
    bytes payload = 3;
}

message AdapterGeneralRequest {
    oneof msg {
        IpfsBlockGetRequest IpfsBlockGetRequest = 1;
        IpfsInfoRequest IpfsInfoRequest = 2;
        IpfsP2pFrowardRequest IpfsP2pFrowardRequest = 3;
        IpfsP2pCloseRequest IpfsP2pCloseRequest = 4;
        IpfsPullCidDataRequest IpfsPullCidDataRequest = 5;
    }
}

message AdapterGeneralResponse {
    oneof msg {
        IpfsInfoResponse IpfsInfoResponse = 1;
    }
}

message Layer1GeneralRequest {
    oneof msg {
        AddNewNodeRequest AddNewNodeRequest = 1;
    }
}

message Layer1GeneralResponse {
    oneof msg {
        AddNewNodeResponse AddNewNodeResponse = 1;
    }
}

message Layer1GeneralEvent {
    oneof msg {
        NewNodeAddedEvent NewNodeAddedEvent = 1;
    }
}

message AddNewNodeRequest {
  bytes teaId = 1;
}

message AddNewNodeResponse {
  bytes teaId = 1;
}

message NewNodeAddedEvent {
  string accountId = 1;
  bytes teaId = 2;
}

message IpfsInfoRequest {
    string peerId = 1;
}

message IpfsInfoResponse {
    string id = 1;
    string publicKey = 2;
    repeated string addresses = 3;
    string agentVersion = 4;
    string protocolVersion = 5;
}

message IpfsP2pFrowardRequest {
    string peerId = 1;
    string reply = 2;
    bytes payload = 3;
}

message IpfsP2pCloseRequest {
    string peerId = 1;
}

message IpfsPullCidDataRequest {
    string peerId = 1;
    string reply = 2;
    bytes payload = 3;
}

message IpfsBlockGetRequest {
    string cid =  1;
    bool waitLocally = 2;
    bool returnIfNotExist = 3;
}