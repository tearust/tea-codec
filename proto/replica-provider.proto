syntax = "proto3";
package replica;
message GenerateSyncMsg { bytes repId = 1; }
message ReceiveSyncMsg { bytes syncMsg = 1; }
message PopReadyTsidReq {}
message PopReadyTsidResponse {
  bytes tsid_bytes = 1;
  bytes txn_bytes = 2;
}
message GetReplicaCount {}
message ClearOutSyncReplica {}
message GetReplicaCountResponse { uint32 count = 1; }
message ReceiveTxn { bytes txnBytes = 1; }
message ReceiveFollowup { bytes followup = 1; }

message RoundTable {
  uint32 desiredCount = 1;
  repeated bytes replicaIds = 2;
}

message GetRoundTableRequest {}
message GetRoundTableResponse {
  RoundTable roundTable = 1;
}

message SetRoundTableRequest {
  RoundTable roundTable = 1;
}

message AddReplicaMemberRequest {
  bytes replicaId = 1;
}

message ResetReplicaMembersRequest { 
  repeated bytes replicaIds = 1;
}

message ResetDesiredCountRequest {
  uint32 desiredCount = 1;
}

message GetReplicaModeRequest {}
message GetReplicaModeResponse {
  bytes mode = 1;
}

message SetReplicaModeRequest {
  bytes mode = 1;
}

message RoundTableMembersRequest {}
message RoundTableMembersResponse {
  repeated bytes replicaIds = 1;
}

message NotifyReplicaMembers { 
  repeated bytes replicaIds = 1;
}